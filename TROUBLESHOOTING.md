# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start

### –ü—Ä–∏—á–∏–Ω–∞
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Ñ–∞–π–ª—ã Python –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –∫–æ—Ä–Ω–µ –≤–º–µ—Å—Ç–æ –ø–∞–ø–æ–∫ `data/` –∏ `utils/`.

### –†–µ—à–µ–Ω–∏–µ
‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞:

```
moe_prostranstvo/
‚îú‚îÄ‚îÄ bot.py
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ tarot_deck.py
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ database.py
    ‚îî‚îÄ‚îÄ ai_generator.py
```

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/mztgmvwd2r-crypto/moe-prostranstvo-bot.git
   cd moe-prostranstvo-bot
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip3 install -r requirements.txt
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã:**
   ```bash
   python3 -c "from data.tarot_deck import get_full_deck; from utils.database import UserDatabase; print('OK')"
   ```
   
   –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: `OK`

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather"
   export OPENAI_API_KEY="–≤–∞—à_openai_–∫–ª—é—á"
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   python3 bot.py
   ```
   
   –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   Bot started! Press Ctrl+C to stop.
   ```

6. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram:**
   - –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

---

## –î—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ModuleNotFoundError: No module named 'telegram'

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-telegram-bot

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip3 install python-telegram-bot
```

### 2. Error: TELEGRAM_BOT_TOKEN environment variable not set

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å —Ç–æ–∫–µ–Ω–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
```bash
export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```bash
echo 'TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"' > .env
```

### 3. OpenAI API Error

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π OPENAI_API_KEY

**–†–µ—à–µ–Ω–∏–µ:**
```bash
export OPENAI_API_KEY="–≤–∞—à_openai_–∫–ª—é—á"
```

### 4. –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –¢–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–æ—Ç @BotFather)
2. –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ
3. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –æ—à–∏–±–æ–∫

**–í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:**
```python
# –í bot.py –∏–∑–º–µ–Ω–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.DEBUG  # –ë—ã–ª–æ: INFO
)
```

### 5. –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å OpenAI API

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ë–∞–ª–∞–Ω—Å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö)

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN –∏–ª–∏ –ø—Ä–æ–∫—Å–∏

### 6. JSON decode error –≤ database.py

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—Ä–µ–∂–¥—ë–Ω —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–¥–∞–ª–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
rm data/users.json data/diary.json data/daily_energy.json

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ ‚Äî —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∑–∞–Ω–æ–≤–æ
python3 bot.py
```

### 7. Permission denied –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ data/

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
```bash
chmod 700 data/
chmod 600 data/*.json
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 1: –ò–º–ø–æ—Ä—Ç—ã
```bash
python3 << 'EOF'
from data.tarot_deck import get_full_deck
from utils.database import UserDatabase
from utils.ai_generator import generate_daily_energy
print("‚úì –ò–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç")
EOF
```

### –¢–µ—Å—Ç 2: –ö–æ–ª–æ–¥–∞ –¢–∞—Ä–æ
```bash
python3 << 'EOF'
from data.tarot_deck import get_full_deck
deck = get_full_deck()
print(f"‚úì –ö–æ–ª–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç {len(deck)} –∫–∞—Ä—Ç")
assert len(deck) == 78, "–î–æ–ª–∂–Ω–æ –±—ã—Ç—å 78 –∫–∞—Ä—Ç"
EOF
```

### –¢–µ—Å—Ç 3: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
python3 << 'EOF'
from utils.database import UserDatabase
user = UserDatabase.get_user(123456789)
print(f"‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω: {user['user_id']}")
EOF
```

---

## –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd)
```bash
sudo journalctl -u moe-prostranstvo -f
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è screen)
```bash
screen -r moe_prostranstvo
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
```bash
python3 bot.py 2>&1 | tee bot.log
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub —Å:
- –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
- –õ–æ–≥–∞–º–∏ –æ—à–∏–±–æ–∫
- –í–µ—Ä—Å–∏–µ–π Python (`python3 --version`)
- –í–µ—Ä—Å–∏–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫ (`pip3 list | grep telegram`)

---

**–ë–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üåø**
